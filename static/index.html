<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Messenger</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body { margin:0; font-family:sans-serif; background:#f4f6fb; }
        #main { display:flex; height:100vh; }
        #sidebar { width:270px; background:#222c36; color:#fff; display:flex; flex-direction:column; }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 20px;
            border-bottom: 1px solid #2d3742;
            background: linear-gradient(135deg, #2d3742, #1a202c);
        }
        .logo-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #4f8cff, #6a7cff);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            font-weight: bold;
        }
        .logo-text {
            font-size: 20px;
            font-weight: 700;
            color: #4f8cff;
        }
        #sidebar h2 { margin:20px 0 10px 20px; font-size:1.2em; }
        #chatList { flex:1; overflow-y:auto; margin:0; padding:0; list-style:none; }
        #chatList li { padding:12px 20px; cursor:pointer; border-bottom:1px solid #2d3742; transition:background .2s; }
        #chatList li.active, #chatList li:hover { background:#2d3742; }
        #createChatBtn { margin:20px; padding:10px; background:#4f8cff; color:#fff; border:none; border-radius:5px; font-size:1em; cursor:pointer; }
        #profileBtn, #logoutBtn { margin:10px 20px 0 0; float:right; }
        #content { flex:1; display:flex; flex-direction:column; }
        #chatHeader { background:#fff; padding:15px 20px; border-bottom:1px solid #e0e0e0; display:flex; align-items:center; }
        #chatTitle { font-size:1.2em; flex:1; }
        #messages { flex:1; overflow-y:auto; padding:20px; background:#f4f6fb; }
        .msg { margin-bottom:18px; }
        .msg.me { text-align:right; }
        .msg .bubble { display:inline-block; padding:10px 16px; border-radius:16px; background:#fff; min-width:40px; max-width:70%; box-shadow:0 1px 3px rgba(0,0,0,0.04); }
        .msg.me .bubble { background:#e6f0ff; }
        .msg .meta { font-size:0.85em; color:#888; margin-top:2px; }
        .msg .username { font-weight:bold; color:#4f8cff; }
        #msgForm, #fileForm { display:flex; gap:8px; padding:15px 20px; background:#fff; border-top:1px solid #e0e0e0; }
        #msgInput { flex:1; padding:10px; border-radius:6px; border:1px solid #ccc; }
        #fileInput { flex:1; }
        #contactsUI, #searchUI { padding:15px 20px; background:#fff; border-bottom:1px solid #e0e0e0; }
        #contactsList, #searchResults { margin:0; padding:0; list-style:none; }
        #contactsList li, #searchResults li { margin-bottom:6px; }
        .modal { display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.25); align-items:center; justify-content:center; z-index:10; }
        .modal-content { background:#fff; padding:30px 25px; border-radius:8px; min-width:300px; max-width:90vw; }
        .close { float:right; cursor:pointer; font-size:1.3em; color:#888; }
        @media (max-width:700px) {
            #main { flex-direction:column; }
            #sidebar { width:100vw; height:auto; flex-direction:row; }
            #chatList { flex-direction:row; display:flex; overflow-x:auto; }
            #chatList li { border-bottom:none; border-right:1px solid #2d3742; }
            #content { min-height:60vh; }
        }
    </style>
</head>
<body>
<div id="main">
    <div id="sidebar">
        <div class="logo">
            <div class="logo-icon">üí¨</div>
            <div class="logo-text">–ë–∏–±–∞</div>
        </div>
        <h2>–ß–∞—Ç—ã</h2>
        <button id="createChatBtn">+ –°–æ–∑–¥–∞—Ç—å —á–∞—Ç</button>
        <ul id="chatList"></ul>
        <button id="contactsBtn">–ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
        <button id="profileBtn">–ü—Ä–æ—Ñ–∏–ª—å</button>
        <button id="logoutBtn">–í—ã–π—Ç–∏</button>
    </div>
    <div id="content">
        <div id="chatHeader"><span id="chatTitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</span></div>
        <div id="messages"></div>
        <form id="msgForm" style="display:none;">
            <input type="text" id="msgInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" autocomplete="off" required>
            <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
        <form id="fileForm" enctype="multipart/form-data" style="display:none;">
            <input type="file" id="fileInput">
            <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª</button>
        </form>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —á–∞—Ç–∞ -->
<div class="modal" id="newChatModal">
    <div class="modal-content">
        <span class="close" id="closeModal">√ó</span>
        <h3>–°–æ–∑–¥–∞—Ç—å —á–∞—Ç</h3>
        <form id="newChatForm">
            <input type="text" id="newChatName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞" required><br><br>
            <div id="newChatContacts"></div>
            <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
        </form>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
<div class="modal" id="profileModal">
    <div class="modal-content">
        <span class="close" id="closeProfile">√ó</span>
        <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
        <div id="profileInfo"></div>
        <form id="profileForm">
            <input type="text" id="profileUsername" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required><br>
            <input type="text" id="profileNickname" placeholder="–ù–∏–∫–Ω–µ–π–º (3-32 —Å–∏–º–≤–æ–ª–∞, —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã/—Ü–∏—Ñ—Ä—ã/_)" required><br>
            <input type="email" id="profileEmail" placeholder="Email" required><br>
            <input type="password" id="profilePassword" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–Ω–µ –º–µ–Ω—è—Ç—å ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)"><br>
            <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
        <div id="profileMsg" style="color:green;"></div>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞ -->
<div class="modal" id="searchModal">
    <div class="modal-content">
        <span class="close" id="closeSearch">√ó</span>
        <h3>–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
        <form id="searchForm">
            <input type="text" id="searchInput" placeholder="–ò–º—è –∏–ª–∏ email">
            <button type="submit">–ù–∞–π—Ç–∏</button>
        </form>
        <ul id="searchResults"></ul>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->
<div class="modal" id="contactsModal">
    <div class="modal-content">
        <span class="close" id="closeContacts">√ó</span>
        <h3>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
        <div style="margin-bottom: 20px;">
            <h4>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç</h4>
            <form id="searchUserForm" style="display: flex; gap: 10px; margin-bottom: 10px;">
                <input type="text" id="searchUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º –∏–ª–∏ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" style="flex: 1;">
                <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
            </form>
            <div id="searchResults" style="margin-top: 10px;"></div>
        </div>
        <div style="border-top: 1px solid #eee; padding-top: 20px;">
            <h4>–ú–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h4>
            <ul id="contactsList"></ul>
        </div>
    </div>
</div>
<script src="/static/app.js"></script>
</body>
</html>
